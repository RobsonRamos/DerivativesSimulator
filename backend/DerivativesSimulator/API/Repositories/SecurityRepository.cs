using API.Model;
using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Linq;
using System.Threading.Tasks;

namespace API
{
    public class SecurityRepository
    {
        private static List<Security> _securities;

        static SecurityRepository()
        {
            _securities = new List<Security>();
            LoadData();
        }

        public List<Security> GetSecurities() {
            return _securities;
        }

        private static void LoadData()
        {
            var ptax = new Security();
            ptax.Name = "PTAX 800";
            ptax.SecurityType = SecurityType.Underlying;

            var dolF20 = new Security();
            dolF20.Name = "DOL F20";
            dolF20.SecurityType = SecurityType.Future;

            dolF20.Maturity = new DateTime(2020, 01, 02);

            var callDol = new Security();
            callDol.Name = "CALL DOLFN96 3000";
            callDol.SecurityType = SecurityType.Option;
            callDol.Strike = 3000.0;

            callDol.Maturity = new DateTime(2020, 01, 02);

            //using (var sr = new StreamReader(Directory.GetCurrentDirectory() + @".\dados.csv"))
            //{
            // while (!sr.EndOfStream)
            //{ 
            int count = 0;
            var data = RetrieveData();

            foreach (var line in data)
            {
                var lineAux = line;
//#if DEBUG
//                lineAux = line.Replace(".", ",");
//#endif
                if (count > 0)
                {
                    var values = lineAux.ToString().Split(';');


                    if (!string.IsNullOrEmpty(values[0]))
                    {
                        var date = DateTime.ParseExact(values[0], "dd/MM/yyyy", CultureInfo.CreateSpecificCulture("pt-BR"));

                        var ptaxPrice = double.Parse(values[1]);

                        ptax.DataSeries.Add(new DataSerie()
                        {
                            Date = date,
                            Price = ptaxPrice
                        });

                        if (!string.IsNullOrEmpty(values[2]))
                        {
                            var dolF20Price = double.Parse(values[2]);
                            var callDolPrice = double.Parse(values[3]);
                            var ttm = Convert.ToInt32(values[4]);

                            dolF20.DataSeries.Add(new DataSerie()
                            {
                                Date = date,
                                Price = dolF20Price
                            });

                            callDol.DataSeries.Add(new DataSerie()
                            {
                                Date = date,
                                Price = callDolPrice,
                                TTM = ttm
                            });
                        }
                    }
                }
                count++;

                //  }
                //  }
            }
            _securities.Add(ptax);
            _securities.Add(dolF20);
            _securities.Add(callDol);
        }

        private static List<string> RetrieveData()
        {
            var list = new List<string>();

            list.Add("06/12/2019;4.178;4153.67;1150;17");
            list.Add("05/12/2019;4.2133;4188.79;1184.83;18");
            list.Add("04/12/2019;4.1923;4201.14;1196.99;19");
            list.Add("03/12/2019;4.2005;4210.41;1206.06;20");
            list.Add("02/12/2019;4.2258;4221.8;1217.22;21");
            list.Add("29/11/2019;4.2237;4235.1;1230;22");
            list.Add("28/11/2019;4.2477;4224.2;1218.97;23");
            list.Add("27/11/2019;4.2599;4261.07;1255.5;24");
            list.Add("26/11/2019;4.2556;4255.37;1249.66;25");
            list.Add("25/11/2019;4.2086;4218.98;1213.29;26");
            list.Add("22/11/2019;4.1829;4197.31;1191.28;27");
            list.Add("21/11/2019;4.2009;4149.8;1143.78;28");
            list.Add("19/11/2019;4.2081;4191.42;1184.89;29");
            list.Add("18/11/2019;4.1824;4149.8;1143.36;30");
            list.Add("14/11/2019;4.1828;4149.8;1142.81;31");
            list.Add("13/11/2019;4.1764;4149.8;1142.67;32");
            list.Add("12/11/2019;4.1753;4149.8;1142.54;33");
            list.Add("11/11/2019;4.1556;4149.8;1142.4;34");
            list.Add("08/11/2019;4.1362;4090.75;1083.3;35");
            list.Add("07/11/2019;4.0924;4090.75;1083.17;36");
            list.Add("06/11/2019;4.0348;4090.75;1083.05;37");
            list.Add("05/11/2019;4.004;3999.13;991.94;38");
            list.Add("04/11/2019;3.9919;4021.24;1013.75;39");
            list.Add("01/11/2019;3.9783;4006.06;998.33;40");
            list.Add("31/10/2019;4.0038;;;");
            list.Add("30/10/2019;4.0183;;;");
            list.Add("29/10/2019;3.9943;;;");
            list.Add("28/10/2019;3.97895;;;");
            list.Add("25/10/2019;4.013;;;");
            list.Add("24/10/2019;4.0086;;;");
            list.Add("23/10/2019;4.0718;;;");
            list.Add("22/10/2019;4.0855;;;");
            list.Add("21/10/2019;4.1316;;;");
            list.Add("18/10/2019;4.1373;;;");
            list.Add("17/10/2019;4.14545;;;");
            list.Add("16/10/2019;4.1711;;;");
            list.Add("15/10/2019;4.1485;;;");
            list.Add("14/10/2019;4.126;;;");
            list.Add("11/10/2019;4.1057;;;");
            list.Add("10/10/2019;4.1142;;;");
            list.Add("09/10/2019;4.0951;;;");
            list.Add("08/10/2019;4.0865;;;");
            list.Add("07/10/2019;4.0685;;;");
            list.Add("04/10/2019;4.0607;;;");
            list.Add("03/10/2019;4.1009;;;");
            list.Add("02/10/2019;4.1543;;;");
            list.Add("01/10/2019;4.1737;;;");
            list.Add("30/09/2019;4.1641;;;");
            list.Add("27/09/2019;4.1584;;;");
            list.Add("26/09/2019;4.1466;;;");
            list.Add("25/09/2019;4.1824;;;");
            list.Add("24/09/2019;4.1718;;;");
            list.Add("23/09/2019;4.1731;;;");
            list.Add("20/09/2019;4.1684;;;");
            list.Add("19/09/2019;4.139;;;");
            list.Add("18/09/2019;4.0969;;;");
            list.Add("17/09/2019;4.0995;;;");
            list.Add("16/09/2019;4.0869;;;");
            list.Add("13/09/2019;4.0613;;;");
            list.Add("12/09/2019;4.0491;;;");
            list.Add("11/09/2019;4.0628;;;");
            list.Add("10/09/2019;4.1105;;;");
            list.Add("09/09/2019;4.0763;;;");
            list.Add("06/09/2019;4.0647;;;");
            list.Add("05/09/2019;4.0856;;;");
            list.Add("04/09/2019;4.1246;;;");
            list.Add("03/09/2019;4.1654;;;");
            list.Add("02/09/2019;4.1578;;;");
            list.Add("30/08/2019;4.1382;;;");
            list.Add("29/08/2019;4.1677;;;");
            list.Add("28/08/2019;4.1556;;;");
            list.Add("27/08/2019;4.1554;;;");
            list.Add("26/08/2019;4.1364;;;");
            list.Add("23/08/2019;4.0848;;;");
            list.Add("22/08/2019;4.0441;;;");
            list.Add("21/08/2019;4.0251;;;");
            list.Add("20/08/2019;4.0422;;;");
            list.Add("19/08/2019;4.0271;;;");
            list.Add("16/08/2019;3.993;;;");
            list.Add("15/08/2019;4.0185;;;");
            list.Add("14/08/2019;4.0071;;;");
            list.Add("13/08/2019;3.9733;;;");
            list.Add("12/08/2019;3.9963;;;");
            list.Add("09/08/2019;3.9359;;;");
            list.Add("08/08/2019;3.9406;;;");
            list.Add("07/08/2019;3.9847;;;");
            list.Add("06/08/2019;3.964;;;");
            list.Add("05/08/2019;3.9401;;;");
            list.Add("02/08/2019;3.8736;;;");
            list.Add("01/08/2019;3.8293;;;");
            list.Add("31/07/2019;3.7646;;;");
            list.Add("30/07/2019;3.7897;;;");
            list.Add("29/07/2019;3.7906;;;");
            list.Add("26/07/2019;3.7738;;;");
            list.Add("25/07/2019;3.7846;;;");
            list.Add("24/07/2019;3.7593;;;");
            list.Add("23/07/2019;3.7618;;;");
            list.Add("22/07/2019;3.7397;;;");
            list.Add("19/07/2019;3.7405;;;");
            list.Add("18/07/2019;3.7486;;;");
            list.Add("17/07/2019;3.7615;;;");
            list.Add("16/07/2019;3.7621;;;");
            list.Add("15/07/2019;3.746;;;");
            list.Add("12/07/2019;3.7449;;;");
            list.Add("11/07/2019;3.753;;;");
            list.Add("10/07/2019;3.7694;;;");
            list.Add("09/07/2019;3.7852;;;");
            list.Add("08/07/2019;3.8062;;;");
            list.Add("05/07/2019;3.8201;;;");
            list.Add("04/07/2019;3.7937;;;");
            list.Add("03/07/2019;3.8472;;;");
            list.Add("02/07/2019;3.8561;;;");
            list.Add("01/07/2019;3.819;;;");
            list.Add("28/06/2019;3.8319;;;");
            list.Add("27/06/2019;3.8639;;;");
            list.Add("26/06/2019;3.8438;;;");
            list.Add("25/06/2019;3.83;;;");
            list.Add("24/06/2019;3.8231;;;");
            list.Add("21/06/2019;3.8252;;;");
            list.Add("19/06/2019;3.872;;;");
            list.Add("18/06/2019;3.8605;;;");
            list.Add("17/06/2019;3.8892;;;");
            list.Add("14/06/2019;3.881;;;");
            list.Add("13/06/2019;3.8426;;;");
            list.Add("12/06/2019;3.8434;;;");
            list.Add("11/06/2019;3.8661;;;");
            list.Add("10/06/2019;3.8787;;;");
            list.Add("07/06/2019;3.8568;;;");
            list.Add("06/06/2019;3.8723;;;");
            list.Add("05/06/2019;3.8608;;;");
            list.Add("04/06/2019;3.8707;;;");
            list.Add("03/06/2019;3.9;;;");
            list.Add("31/05/2019;3.9404;;;");
            list.Add("30/05/2019;3.9717;;;");
            list.Add("29/05/2019;3.9962;;;");
            list.Add("28/05/2019;4.0272;;;");
            list.Add("27/05/2019;4.0207;;;");
            list.Add("24/05/2019;4.0319;;;");
            list.Add("23/05/2019;4.051;;;");
            list.Add("22/05/2019;4.0225;;;");
            list.Add("21/05/2019;4.0807;;;");
            list.Add("20/05/2019;4.1053;;;");
            list.Add("17/05/2019;4.0841;;;");
            list.Add("16/05/2019;4.0135;;;");
            list.Add("15/05/2019;4.0028;;;");
            list.Add("14/05/2019;3.9785;;;");
            list.Add("13/05/2019;3.9887;;;");
            list.Add("10/05/2019;3.9575;;;");
            list.Add("09/05/2019;3.967;;;");
            list.Add("08/05/2019;3.9341;;;");
            list.Add("07/05/2019;3.9877;;;");
            list.Add("06/05/2019;3.9621;;;");
            list.Add("03/05/2019;3.9385;;;");
            list.Add("02/05/2019;3.9647;;;");
            list.Add("30/04/2019;3.945;;;");
            list.Add("29/04/2019;3.9361;;;");
            list.Add("26/04/2019;3.935;;;");
            list.Add("25/04/2019;3.9722;;;");
            list.Add("24/04/2019;3.9627;;;");
            list.Add("23/04/2019;3.9433;;;");
            list.Add("22/04/2019;3.9227;;;");
            list.Add("18/04/2019;3.9367;;;");
            list.Add("17/04/2019;3.9222;;;");
            list.Add("16/04/2019;3.891;;;");
            list.Add("15/04/2019;3.8727;;;");
            list.Add("12/04/2019;3.8682;;;");
            list.Add("11/04/2019;3.8396;;;");
            list.Add("10/04/2019;3.8342;;;");
            list.Add("09/04/2019;3.856;;;");
            list.Add("08/04/2019;3.8655;;;");
            list.Add("05/04/2019;3.8619;;;");
            list.Add("04/04/2019;3.871;;;");
            list.Add("03/04/2019;3.8433;;;");
            list.Add("02/04/2019;3.8658;;;");
            list.Add("01/04/2019;3.8679;;;");
            list.Add("29/03/2019;3.8964;;;");
            list.Add("28/03/2019;3.9679;;;");
            list.Add("27/03/2019;3.9386;;;");
            list.Add("26/03/2019;3.8643;;;");
            list.Add("25/03/2019;3.8767;;;");
            list.Add("22/03/2019;3.8812;;;");
            list.Add("21/03/2019;3.7964;;;");
            list.Add("20/03/2019;3.7894;;;");
            list.Add("19/03/2019;3.7759;;;");
            list.Add("18/03/2019;3.8108;;;");
            list.Add("15/03/2019;3.8341;;;");
            list.Add("14/03/2019;3.8324;;;");
            list.Add("13/03/2019;3.8262;;;");
            list.Add("12/03/2019;3.8126;;;");
            list.Add("11/03/2019;3.8458;;;");
            list.Add("08/03/2019;3.8675;;;");
            list.Add("07/03/2019;3.8484;;;");
            list.Add("06/03/2019;3.83;;;");
            list.Add("01/03/2019;3.7829;;;");
            list.Add("28/02/2019;3.7382;;;");
            list.Add("27/02/2019;3.7348;;;");
            list.Add("26/02/2019;3.7592;;;");
            list.Add("25/02/2019;3.7282;;;");
            list.Add("22/02/2019;3.7427;;;");
            list.Add("21/02/2019;3.7592;;;");
            list.Add("20/02/2019;3.7097;;;");
            list.Add("19/02/2019;3.7203;;;");
            list.Add("18/02/2019;3.7313;;;");
            list.Add("15/02/2019;3.7152;;;");
            list.Add("14/02/2019;3.7753;;;");
            list.Add("13/02/2019;3.7274;;;");
            list.Add("12/02/2019;3.7293;;;");
            list.Add("11/02/2019;3.7388;;;");
            list.Add("08/02/2019;3.7181;;;");
            list.Add("07/02/2019;3.719;;;");
            list.Add("06/02/2019;3.7016;;;");
            list.Add("05/02/2019;3.6738;;;");
            list.Add("04/02/2019;3.6753;;;");
            list.Add("01/02/2019;3.6691;;;");
            list.Add("31/01/2019;3.6516;;;");
            list.Add("30/01/2019;3.7148;;;");
            list.Add("29/01/2019;3.7367;;;");
            list.Add("28/01/2019;3.7673;;;");
            list.Add("25/01/2019;3.76195;;;");
            list.Add("24/01/2019;3.7812;;;");
            list.Add("23/01/2019;3.7991;;;");
            list.Add("22/01/2019;3.7612;;;");
            list.Add("21/01/2019;3.7702;;;");
            list.Add("18/01/2019;3.7483;;;");
            list.Add("17/01/2019;3.7588;;;");
            list.Add("16/01/2019;3.7194;;;");
            list.Add("15/01/2019;3.7046;;;");
            list.Add("14/01/2019;3.72575;;;");
            list.Add("11/01/2019;3.7138;;;");
            list.Add("10/01/2019;3.6866;;;");
            list.Add("09/01/2019;3.6928;;;");
            list.Add("08/01/2019;3.7205;;;");
            list.Add("07/01/2019;3.7059;;;");
            list.Add("04/01/2019;3.7624;;;");
            list.Add("03/01/2019;3.768;;;");
            list.Add("02/01/2019;3.8592;;;");
            list.Add("31/12/2018;3.8745;;;");
            list.Add("28/12/2018;3.8745;;;");
            list.Add("27/12/2018;3.9327;;;");
            list.Add("26/12/2018;3.9255;;;");
            list.Add("24/12/2018;3.8847;;;");
            list.Add("21/12/2018;3.8668;;;");
            list.Add("20/12/2018;3.844;;;");
            list.Add("19/12/2018;3.8904;;;");
            list.Add("18/12/2018;3.8994;;;");
            list.Add("17/12/2018;3.9118;;;");
            list.Add("14/12/2018;3.9087;;;");
            list.Add("13/12/2018;3.8787;;;");
            list.Add("12/12/2018;3.8626;;;");
            list.Add("11/12/2018;3.901;;;");
            list.Add("10/12/2018;3.9107;;;");
            list.Add("07/12/2018;3.8961;;;");
            list.Add("06/12/2018;3.9175;;;");
            list.Add("05/12/2018;3.8558;;;");
            list.Add("04/12/2018;3.831;;;");
            list.Add("03/12/2018;3.8282;;;");
            list.Add("30/11/2018;3.863;;;");
            list.Add("29/11/2018;3.8565;;;");
            list.Add("28/11/2018;3.8628;;;");
            list.Add("27/11/2018;3.8922;;;");
            list.Add("26/11/2018;3.8652;;;");
            list.Add("23/11/2018;3.8078;;;");
            list.Add("22/11/2018;3.81;;;");
            list.Add("21/11/2018;3.7869;;;");
            list.Add("20/11/2018;3.75825;;;");
            list.Add("19/11/2018;3.755;;;");
            list.Add("16/11/2018;3.7522;;;");
            list.Add("14/11/2018;3.7921;;;");
            list.Add("13/11/2018;3.7789;;;");
            list.Add("12/11/2018;3.7475;;;");
            list.Add("09/11/2018;3.7503;;;");
            list.Add("08/11/2018;3.7388;;;");
            list.Add("07/11/2018;3.7589;;;");
            list.Add("06/11/2018;3.7489;;;");
            list.Add("05/11/2018;3.7045;;;");
            list.Add("01/11/2018;3.69705;;;");
            list.Add("31/10/2018;3.7174;;;");
            list.Add("30/10/2018;3.7016;;;");
            list.Add("29/10/2018;3.6365;;;");
            list.Add("26/10/2018;3.67495;;;");
            list.Add("25/10/2018;3.7011;;;");
            list.Add("24/10/2018;3.7057;;;");
            list.Add("23/10/2018;3.7077;;;");
            list.Add("22/10/2018;3.69;;;");
            list.Add("19/10/2018;3.7076;;;");
            list.Add("18/10/2018;3.696;;;");
            list.Add("17/10/2018;3.7005;;;");
            list.Add("16/10/2018;3.7076;;;");
            list.Add("15/10/2018;3.7329;;;");
            list.Add("11/10/2018;3.7457;;;");
            list.Add("10/10/2018;3.7507;;;");
            list.Add("09/10/2018;3.7388;;;");
            list.Add("08/10/2018;3.7585;;;");
            list.Add("05/10/2018;3.8696;;;");
            list.Add("04/10/2018;3.9044;;;");
            list.Add("03/10/2018;3.8539;;;");
            list.Add("02/10/2018;3.9502;;;");
            list.Add("01/10/2018;4.027;;;");
            list.Add("28/09/2018;4.0036;;;");
            list.Add("27/09/2018;4.0089;;;");
            list.Add("26/09/2018;4.0567;;;");
            list.Add("25/09/2018;4.1283;;;");
            list.Add("24/09/2018;4.0591;;;");
            list.Add("21/09/2018;4.0725;;;");
            list.Add("20/09/2018;4.0994;;;");
            list.Add("19/09/2018;4.1348;;;");
            list.Add("18/09/2018;4.1366;;;");
            list.Add("17/09/2018;4.1692;;;");
            list.Add("14/09/2018;4.1876;;;");
            list.Add("13/09/2018;4.1634;;;");
            list.Add("12/09/2018;4.1256;;;");
            list.Add("11/09/2018;4.1638;;;");
            list.Add("10/09/2018;4.1004;;;");
            list.Add("06/09/2018;4.1457;;;");
            list.Add("05/09/2018;4.1606;;;");
            list.Add("04/09/2018;4.1649;;;");
            list.Add("03/09/2018;4.1276;;;");
            list.Add("31/08/2018;4.135;;;");
            list.Add("30/08/2018;4.1809;;;");
            list.Add("29/08/2018;4.135;;;");
            list.Add("28/08/2018;4.1189;;;");
            list.Add("27/08/2018;4.0684;;;");
            list.Add("24/08/2018;4.0851;;;");
            list.Add("23/08/2018;4.0724;;;");
            list.Add("22/08/2018;4.0737;;;");
            list.Add("21/08/2018;3.987;;;");
            list.Add("20/08/2018;3.9427;;;");
            list.Add("17/08/2018;3.9386;;;");
            list.Add("16/08/2018;3.8807;;;");
            list.Add("15/08/2018;3.9131;;;");
            list.Add("14/08/2018;3.8809;;;");
            list.Add("13/08/2018;3.8985;;;");
            list.Add("10/08/2018;3.8469;;;");
            list.Add("09/08/2018;3.8027;;;");
            list.Add("08/08/2018;3.7516;;;");
            list.Add("07/08/2018;3.7115;;;");
            list.Add("06/08/2018;3.7211;;;");
            list.Add("03/08/2018;3.7198;;;");
            list.Add("02/08/2018;3.7642;;;");
            list.Add("01/08/2018;3.7488;;;");
            list.Add("31/07/2018;3.7546;;;");
            list.Add("30/07/2018;3.7152;;;");
            list.Add("27/07/2018;3.7161;;;");
            list.Add("26/07/2018;3.724;;;");
            list.Add("25/07/2018;3.7117;;;");
            list.Add("24/07/2018;3.7456;;;");
            list.Add("23/07/2018;3.7912;;;");
            list.Add("20/07/2018;3.779;;;");
            list.Add("19/07/2018;3.8844;;;");
            list.Add("18/07/2018;3.8471;;;");
            list.Add("17/07/2018;3.8668;;;");
            list.Add("16/07/2018;3.8576;;;");
            list.Add("13/07/2018;3.8742;;;");
            list.Add("12/07/2018;3.8561;;;");
            list.Add("11/07/2018;3.8414;;;");
            list.Add("10/07/2018;3.8449;;;");
            list.Add("09/07/2018;3.8686;;;");
            list.Add("06/07/2018;3.9261;;;");
            list.Add("05/07/2018;3.9189;;;");
            list.Add("04/07/2018;3.9055;;;");
            list.Add("03/07/2018;3.8917;;;");
            list.Add("02/07/2018;3.9052;;;");



            return list;
        }
    }
}
